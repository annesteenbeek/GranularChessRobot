https://developer.mbed.org/users/vsluiter/code/Encoder/#18b000b443af
